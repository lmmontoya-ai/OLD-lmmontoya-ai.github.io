---
import { formatRelativeDate } from "../../utils/dateUtils";
import { iconPaths } from "../../utils/iconPaths";

// src/components/ui/UpdateCard.astro
// Reusable component for displaying latest update cards with consistent styling

interface Props {
  title: string;
  date: string;
  tag: string;
  description?: string;
  href: string;
  icon: "roadmap" | "project" | "literature";
  variant: "milestone" | "project" | "resource";
}

const { title, date, tag, description, href, icon, variant } = Astro.props;
---

<a
  href={href}
  class={`update-card update-card-${variant} group block transition-all duration-200 focus-visible:outline focus-visible:outline-2 focus-visible:outline-accent focus-visible:outline-offset-2`}
>
  <div class="flex items-center gap-3">
    <div class={`update-icon update-icon-${variant} flex-shrink-0`}>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="h-4 w-4"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        stroke-width="2"
      >
        <path stroke-linecap="round" stroke-linejoin="round" d={iconPaths[icon]}
        ></path>
      </svg>
    </div>

    <div class="min-w-0 flex-1">
      <div class={`update-tag update-tag-${variant}`}>
        {tag}
      </div>

      <h4
        class="font-semibold text-themed-text mb-1.5 font-sans leading-tight group-hover:text-accent transition-colors duration-200 text-base"
      >
        {title}
      </h4>

      {
        description && (
          <p class="text-themed-text-secondary text-sm mb-2 leading-relaxed font-body line-clamp-2">
            {description}
          </p>
        )
      }

      <div
        class="text-xs text-themed-text-secondary font-mono opacity-75 group-hover:opacity-100 transition-opacity duration-200"
      >
        <time datetime={date} class="tabular-nums font-medium">
          {date}
        </time>
        <span class="opacity-60 mx-1.5">â€¢</span>
        <span class="opacity-80">
          {formatRelativeDate(date)}
        </span>
      </div>
    </div>
  </div>
</a>
